<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns:MSHelp="http://www.microsoft.com/MSHelp/" lang="en-us" xml:lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="MKL_DOMAIN_NUM_THREADS">
<meta name="DC.Relation" scheme="URI" content="GUID-0073DDBD-3239-44B2-AD92-87A533733E11.htm">
<meta name="DC.Relation" scheme="URI" content="http://www.intel.com/software/products/softwaredocs_feedback">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="GUID-B530388E-B96C-48A2-A498-DCBA4E6CFEDC">
<meta name="DC.Language" content="en-US">
<link rel="stylesheet" type="text/css" href="intel_css_styles.css">
<title>mkl_domain_num_threads</title>
<xml>
<MSHelp:Attr Name="DocSet" Value="Intel"></MSHelp:Attr>
<MSHelp:Attr Name="Locale" Value="kbEnglish"></MSHelp:Attr>
<MSHelp:Attr Name="TopicType" Value="kbReference"></MSHelp:Attr>
</xml>
</head>
<body id="GUID-B530388E-B96C-48A2-A498-DCBA4E6CFEDC">
 <!-- ==============(Start:NavScript)================= -->
 <script src="NavScript.js" language="JavaScript1.2" type="text/javascript"></script>
 <script language="JavaScript1.2" type="text/javascript">WriteNavLink(0);</script>
 <!-- ==============(End:NavScript)================= -->
<p id="header_text" style="margin-bottom : 20pt"><em>Intel&reg; Math Kernel Library 11.1 Update 3 User's Guide</em></p>


 
  <h1 class="topictitle1">MKL_DOMAIN_NUM_THREADS</h1>
 
   
   
  <div id="GUID-894B5A4D-EA26-4B63-AB48-3853B5A56C4E"> 
    <p id="GUID-C4DE95AC-0E0D-436E-B50F-953F48B3F58F">The 
      <samp class="codeph" id="GUID-65FA8EBE-6927-44EB-8C90-99CF729AD3BD">MKL_DOMAIN_NUM_THREADS</samp> environment variable suggests the number of threads for a particular function domain. 
    </p>
 
    <p id="GUID-975FF5EF-1524-4DD9-94F2-1EDE6A002996"> 
      <samp class="codeph" id="GUID-B6BA8764-586B-41BB-8BD0-5207A38C5C2D">MKL_DOMAIN_NUM_THREADS</samp> accepts a string value 
      <samp class="codeph" id="GUID-90438CF4-242A-4809-8F69-6919B8952DA2">&lt;MKL-env-string&gt;</samp>, which must have the following format: 
    </p>
 
    <p id="GUID-B0341E21-22AD-45E4-87A3-2E44A78ED157"> 
      <samp class="codeph" id="GUID-5F8D8993-050A-4941-9C30-D32E4EDECB33"> 
        <var>&lt;MKL-env-string&gt;</var> ::= 
        <var>&lt;MKL-domain-env-string&gt;</var> { 
        <var>&lt;delimiter&gt;</var><var>&lt;MKL-domain-env-string&gt;</var> }</samp> 
    </p>
 
    <p id="GUID-9FE53382-5DAC-401A-9486-B5952103D0C9"> 
      <samp class="codeph" id="GUID-1186DF5B-76AE-494E-B5EE-4E9C5F4CFA39"> 
        <var>&lt;delimiter&gt;</var> ::= [ 
        <var>&lt;space-symbol&gt;</var>* ] ( 
        <var>&lt;space-symbol&gt;</var> | 
        <var>&lt;comma-symbol&gt;</var> | 
        <var>&lt;semicolon-symbol&gt;</var> | 
        <var>&lt;colon-symbol&gt;</var>) [ 
        <var>&lt;space-symbol&gt;</var>* ]</samp> 
    </p>
 
    <p id="GUID-EA8B9F9E-C685-4637-A86D-C8C5ADEC9A94"> 
      <samp class="codeph" id="GUID-7C866F50-A7B2-44FC-AD12-6678B5CC4764"> 
        <var>&lt;MKL-domain-env-string&gt;</var> ::= 
        <var>&lt;MKL-domain-env-name&gt;</var><var>&lt;uses&gt;</var><var>&lt;number-of-threads&gt;</var></samp> 
    </p>
 
    <p id="GUID-6EDA2816-88A9-4C80-A17B-ED86CD7DCB07"> 
      <samp class="codeph" id="GUID-552442DE-DEF0-4BA4-8F2F-51AD23B7F79C"> 
        <var>&lt;MKL-domain-env-name&gt;</var> ::= MKL_DOMAIN_ALL | MKL_DOMAIN_BLAS | MKL_DOMAIN_FFT | MKL_DOMAIN_VML | MKL_DOMAIN_PARDISO</samp> 
    </p>
 
    <p id="GUID-9E226135-37A1-4917-8383-9B32FC009FC5"> 
      <samp class="codeph" id="GUID-060ED75E-AE83-4273-B151-E192FE7FB191"> 
        <var>&lt;uses&gt;</var> ::= [ 
        <var>&lt;space-symbol&gt;</var>* ] ( 
        <var>&lt;space-symbol&gt;</var> | 
        <var>&lt;equality-sign&gt;</var> | 
        <var>&lt;comma-symbol&gt;</var>) [ 
        <var>&lt;space-symbol&gt;</var>* ]</samp> 
    </p>
 
    <p id="GUID-C454DF77-488A-47A5-9CF0-2F58BB3E564E"> 
      <samp class="codeph" id="GUID-6F56F28A-429A-4586-B778-25101FBB1433"> 
        <var>&lt;number-of-threads&gt;</var> ::= 
        <var>&lt;positive-number&gt;</var></samp> 
    </p>
 
    <p id="GUID-809977E0-B614-429C-8D68-3D51D18BBB89"> 
      <samp class="codeph" id="GUID-637FC8C2-1FBB-441D-AA1B-D59D5CCBDE25"> 
        <var>&lt;positive-number&gt;</var> ::= 
        <var>&lt;decimal-positive-number&gt;</var> | 
        <var>&lt;octal-number&gt;</var> | 
        <var>&lt;hexadecimal-number&gt;</var></samp> 
    </p>
 
    <p id="GUID-5F4CE179-6EDE-4538-BAEE-65F37629BE42">In the syntax above, values of 
      <samp class="codeph" id="GUID-5D34BCFA-77FE-4216-92E1-225A1DC09875"><var>&lt;MKL-domain-env-name&gt;</var></samp> indicate function domains as follows: 
    </p>
 
    <table cellspacing="0" cellpadding="4" border="0" width="90%" style="border-spacing:0; border-collapse:collapse"> 
      <tr> 
        <td valign="top" width="30%" class="noborder"><p><samp class="codeph">MKL_DOMAIN_ALL</samp> 
        </p></td>
 
        <td valign="top" class="noborder">
          <p>All function domains
          </p>

        </td>
 
      </tr> 
      <tr> 
        <td valign="top" width="30%" class="noborder"><p><samp class="codeph">MKL_DOMAIN_BLAS</samp> 
        </p></td>
 
        <td valign="top" class="noborder"> 
          <p>BLAS Routines
          </p>
 
        </td>
 
      </tr> 
      <tr> 
        <td valign="top" width="30%" class="noborder"><p><samp class="codeph">MKL_DOMAIN_FFT</samp> 
        </p></td>
 
        <td valign="top" class="noborder">
          <p>non-cluster Fourier Transform Functions
          </p>

        </td>
 
      </tr> 
      <tr> 
        <td valign="top" width="30%" class="noborder"><p><samp class="codeph">MKL_DOMAIN_VML</samp> 
        </p></td>
 
        <td valign="top" class="noborder">
          <p>Vector Mathematical Functions
          </p>
 
        </td>
 
      </tr> 
      <tr> 
        <td valign="top" width="30%" class="noborder"><p><samp class="codeph">MKL_DOMAIN_PARDISO</samp> 
        </p></td>
 
        <td valign="top" class="noborder">
          <p>PARDISO
          </p>
 
        </td>
 
      </tr> 
    </table>
 
    <p id="GUID-2C2A1374-7807-4269-A7DF-CE86AE29726B">For example, 
    </p>
 
    <p id="GUID-B9128F50-E485-49B0-85F9-435E22693EFD"> 
      <samp class="codeph" id="GUID-C50312F9-6BB9-434C-81C1-FA233D89552C">MKL_DOMAIN_ALL 2 : MKL_DOMAIN_BLAS 1 : MKL_DOMAIN_FFT 4</samp> 
    </p>
 
    <p id="GUID-FD9DD140-15D4-40AA-BE38-1220EB6215F4"> 
      <samp class="codeph" id="GUID-5E9A40FF-8876-4E1D-AF29-5840A4B0C1A4">MKL_DOMAIN_ALL=2 : MKL_DOMAIN_BLAS=1 : MKL_DOMAIN_FFT=4</samp> 
    </p>
 
    <p id="GUID-05CD66DB-5332-4608-89BE-3A633F5B9A8E"> 
      <samp class="codeph" id="GUID-63305E01-DDA8-4122-A566-AA7C12B0ED63">MKL_DOMAIN_ALL=2, &nbsp;MKL_DOMAIN_BLAS=1, &nbsp;MKL_DOMAIN_FFT=4</samp> 
    </p>
 
    <p id="GUID-57FE79D1-D9A9-4631-96A6-0916EE11E04E"> 
      <samp class="codeph" id="GUID-FDFBFAF5-5BD6-43FC-AE15-B9EEE1A6E477">MKL_DOMAIN_ALL=2; &nbsp;MKL_DOMAIN_BLAS=1; &nbsp;MKL_DOMAIN_FFT=4</samp> 
    </p>
 
    <p id="GUID-CF69F621-9F54-444F-B5F0-9188F15F92D4"> 
      <samp class="codeph" id="GUID-994A8665-813D-4083-9943-ABFC8EB2067F">MKL_DOMAIN_ALL &nbsp;= 2 &nbsp;MKL_DOMAIN_BLAS 1 , &nbsp;MKL_DOMAIN_FFT &nbsp;4</samp> 
    </p>
 
    <p id="GUID-281318DF-2F8D-4567-98C6-3E250A5CF688"> 
      <samp class="codeph" id="GUID-7EA67B7E-47CA-48E4-9491-648C2B1F368F">MKL_DOMAIN_ALL,2: MKL_DOMAIN_BLAS 1, MKL_DOMAIN_FFT,4 .</samp> 
    </p>
 
    <p id="GUID-3CB39125-D8B4-4E5D-80A1-CDDFD85AD6E0">The global variables 
      <samp class="codeph" id="GUID-F9466030-748D-4590-A234-70B4E2C6B346">MKL_DOMAIN_ALL, MKL_DOMAIN_BLAS, MKL_DOMAIN_FFT,</samp> 
      <samp class="codeph" id="GUID-2184F86F-0DA4-44FF-91DF-1FE9DA1D8FAF">MKL_DOMAIN_VML</samp>, and<samp class="codeph"> MKL_DOMAIN_PARDISO</samp>, as well as the interface for the Intel MKL threading control functions, can be found in the 
      <span class="filepath" id="GUID-F48971B1-2EC7-464C-83F0-62B58AF8579B">mkl.h</span> header file. 
    </p>
 
    <p id="GUID-B64EAC01-7DC3-4ABD-BD5E-AA749DAFB4A1">The table below illustrates how values of 
      <samp class="codeph" id="GUID-6E992821-589F-4E0C-A463-E2B5D2D0A992">MKL_DOMAIN_NUM_THREADS</samp> are interpreted. 
    </p>
 
    
<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-A3691B66-DE54-4DA6-A00B-52CA3BC09AF5" width="100%" frame="hsides" border="1" rules="all"> 
         
         
        <thead align="left"> 
          <tr> 
            <th class="cellrowborder" valign="top" width="20%" id="d62596e332"> 
              <p id="GUID-22E2712A-3671-4248-84F2-67186411393C">Value of 
                <samp class="codeph" id="GUID-816E55E6-33E6-4538-B495-FB4B55A047D3">MKL_DOMAIN_NUM_THREADS</samp> 
              </p>
 
            </th>
 
            <th class="row-nocellborder" valign="top" width="80%" id="d62596e341"> 
              <p id="GUID-3E415AC5-1751-4B1D-8D94-9A0B64627D1D">Interpretation 
              </p>
 
            </th>
 
          </tr>
 
        </thead>
 
        <tbody> 
          <tr> 
            <td class="cellrowborder" valign="top" width="20%" headers="d62596e332 "> 
              <p id="GUID-2977E221-A676-4230-960E-3EA92BC7AEAD"> 
                <samp class="codeph" id="GUID-6F7CE3B3-7475-415C-87A3-23DC3167EE70">MKL_DOMAIN_ALL=4</samp> 
              </p>
 
            </td>
 
            <td class="row-nocellborder" valign="top" width="80%" headers="d62596e341 "> 
              <p id="GUID-ABA88C6B-A786-4882-94E8-E7F6BFBAAFAE">All parts of Intel MKL should try four threads. The actual number of threads may be still different because of the 
                <samp class="codeph" id="GUID-FADEB8AF-8A4C-4460-B82A-F613EC10502A">MKL_DYNAMIC</samp> setting or system resource issues. The setting is equivalent to 
                <samp class="codeph" id="GUID-45F7353B-FCB7-4498-9754-8161D89F439A">MKL_NUM_THREADS</samp> = 4. 
              </p>
 
            </td>
 
          </tr>
 
          <tr> 
            <td class="cellrowborder" valign="top" width="20%" headers="d62596e332 "> 
              <p id="GUID-152B0B8D-65DE-4D74-A5B2-66944A6BF93E"> 
                <samp class="codeph" id="GUID-30900212-A61C-4CB5-B0A9-04FF899EA195">MKL_DOMAIN_ALL=1, MKL_DOMAIN_BLAS=4</samp> 
              </p>
 
            </td>
 
            <td class="row-nocellborder" valign="top" width="80%" headers="d62596e341 "> 
              <p id="GUID-A2BD30A8-B00A-4105-AFA9-ECBE98024453">All parts of Intel MKL should try one thread, except for BLAS, which is suggested to try four threads. 
              </p>
 
            </td>
 
          </tr>
 
          <tr> 
            <td class="cellrowborder" valign="top" width="20%" headers="d62596e332 "> 
              <p id="GUID-2C0DA7E4-FAAF-4D65-9963-C03D4A75E4B2"> 
                <samp class="codeph" id="GUID-767F8F80-1662-4231-AB25-1CD16EF61A67">MKL_DOMAIN_VML=2</samp> 
              </p>
 
            </td>
 
            <td class="row-nocellborder" valign="top" width="80%" headers="d62596e341 "> 
              <p id="GUID-D78A09F9-6C51-4696-8B56-E05CA50664BD">VML should try two threads. The setting affects no other part of Intel MKL. 
              </p>
 
            </td>
 
          </tr>
 
        </tbody>
 
      </table>
</div>
 
    <p id="GUID-F3C1D82D-8F34-4E43-9371-D3944146AA6B">Be aware that the domain-specific settings take precedence over the overall ones. For example, the "<samp class="codeph" id="GUID-86885BB6-7AF7-458C-AFF9-E82F6587873D">MKL_DOMAIN_BLAS=4</samp>" value of 
      <samp class="codeph" id="GUID-D21855C4-E9F3-4128-96A0-3BF353ED9E3B">MKL_DOMAIN_NUM_THREADS</samp> suggests trying four threads for BLAS, regardless of later setting 
      <samp class="codeph" id="GUID-CA76D1FA-3F2B-40E5-9A60-666D2B8F7A5E">MKL_NUM_THREADS,</samp> and a function call "<samp class="codeph" id="GUID-E7578913-9895-4501-AB67-3D44992A87CE">mkl_domain_set_num_threads ( 4, MKL_DOMAIN_BLAS );</samp>" suggests the same, regardless of later calls to 
      <samp class="codeph" id="GUID-2C957B73-5D53-428A-9AF4-D6737AD9E11D">mkl_set_num_threads()</samp>. 
      <br> However, a function call with input "<samp class="codeph" id="GUID-9B9CA016-065C-45D5-A7BE-DFDBF661294C">MKL_DOMAIN_ALL</samp>", such as "<samp class="codeph" id="GUID-5FEDFBD7-EE28-4DA5-B3EB-6F749D58E207">mkl_domain_set_num_threads (4, MKL_DOMAIN_ALL);</samp>" is equivalent to "<samp class="codeph" id="GUID-92974D50-15D5-455A-A252-0DBD75A350DC">mkl_set_num_threads(4)</samp>", and thus it will be overwritten by later calls to 
      <samp class="codeph" id="GUID-F901FCD9-7FB2-4988-9B14-9A7B705B346D">mkl_set_num_threads</samp>. Similarly, the environment setting of 
      <samp class="codeph" id="GUID-1F6F4468-378B-483C-9F0C-76C2A1E6174F">MKL_DOMAIN_NUM_THREADS</samp> with "<samp class="codeph" id="GUID-EAE74725-B98A-4E46-AC86-4AD2C116DD22">MKL_DOMAIN_ALL=4</samp>" will be overwritten with 
      <samp class="codeph" id="GUID-C945312E-1903-4F38-BA16-07972EDA1D0F">MKL_NUM_THREADS</samp> = 2. 
    </p>
 
    <p id="GUID-E8677E4B-1079-4370-AF4D-0E59FC846D86">Whereas the 
      <samp class="codeph" id="GUID-1D500E9E-FBF9-4452-9ABD-C29DF1E54B41">MKL_DOMAIN_NUM_THREADS</samp> environment variable enables you set several variables at once, for example, 
      <samp class="codeph" id="GUID-59006C74-A0CC-4EBE-81D4-1659A76458B6">"MKL_DOMAIN_BLAS=4,MKL_DOMAIN_FFT=2"</samp>, the corresponding function does not take string syntax. So, to do the same with the function calls, you may need to make several calls, which in this example are as follows: 
    </p>
 
    <p id="GUID-5403C51B-CF2A-46E8-866C-5A67FAD062F9"> 
      <samp class="codeph" id="GUID-699CB91F-E2F0-4CFF-9014-CC10927B6D86">mkl_domain_set_num_threads ( 4, MKL_DOMAIN_BLAS );</samp> 
    </p>
 
    <p id="GUID-4EA2EF08-C70D-42E2-9FAC-61609A205F07"> 
      <samp class="codeph" id="GUID-53C78910-3266-4576-85B4-A14ADBBC3A79">mkl_domain_set_num_threads ( 2, MKL_DOMAIN_FFT );</samp> 
    </p>
 
  </div>
 
  
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong>&nbsp;<a href="GUID-0073DDBD-3239-44B2-AD92-87A533733E11.htm">Using Additional Threading Control</a></div>
</div>
<div><br clear="all">
<div class="docfeedback">
<div><a href="http://www.intel.com/software/products/softwaredocs_feedback" target="_blank">Submit feedback on this help topic 
		  </a></div></div></div> 

</body>
</html>
