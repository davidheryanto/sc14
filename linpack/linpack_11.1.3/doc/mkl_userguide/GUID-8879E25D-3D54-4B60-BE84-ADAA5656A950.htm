<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns:MSHelp="http://www.microsoft.com/MSHelp/" lang="en-us" xml:lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Setting Environment Variables for Automatic Offload">
<meta name="DC.Relation" scheme="URI" content="GUID-023059FF-E35D-4DEB-829F-6FFF1E8CFF45.htm">
<meta name="DC.Relation" scheme="URI" content="GUID-3DC4FC7D-A1E4-423D-9C0C-06AB265FFA86.htm#GUID-3DC4FC7D-A1E4-423D-9C0C-06AB265FFA86">
<meta name="DC.Relation" scheme="URI" content="GUID-9B5D271C-F370-437D-A409-0D8491CE6733.htm">
<meta name="DC.Relation" scheme="URI" content="http://www.intel.com/software/products/softwaredocs_feedback">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="GUID-8879E25D-3D54-4B60-BE84-ADAA5656A950">
<meta name="DC.Language" content="en-US">
<link rel="stylesheet" type="text/css" href="intel_css_styles.css">
<title>Setting Environment Variables for Automatic Offload</title>
<xml>
<MSHelp:Attr Name="DocSet" Value="Intel"></MSHelp:Attr>
<MSHelp:Attr Name="Locale" Value="kbEnglish"></MSHelp:Attr>
<MSHelp:Attr Name="TopicType" Value="kbReference"></MSHelp:Attr>
<MSHelp:Keyword Index="F" Term="mkl_mic_enable"></MSHelp:Keyword>
<MSHelp:Keyword Index="F" Term="mkl_mic_set_workdivision"></MSHelp:Keyword>
</xml>
</head>
<body id="GUID-8879E25D-3D54-4B60-BE84-ADAA5656A950">
 <!-- ==============(Start:NavScript)================= -->
 <script src="NavScript.js" language="JavaScript1.2" type="text/javascript"></script>
 <script language="JavaScript1.2" type="text/javascript">WriteNavLink(0);</script>
 <!-- ==============(End:NavScript)================= -->
<p id="header_text" style="margin-bottom : 20pt"><em>Intel&reg; Math Kernel Library 11.1 Update 3 User's Guide</em></p>


 
  <h1 class="topictitle1">Setting Environment Variables for Automatic Offload</h1>
 
   
  <div id="GUID-7137A72C-2175-478A-BCAB-F10E110A899E"> 
	 <div class="Note"><h3 class="NoteTipHead">Important</h3> 
		<p>To use Automatic Offload: 
		</p>
 
		<ul id="GUID-5CCEE80D-C1AD-41A3-A8BD-73AB1F0A85DA"> 
		  <li>If you completed the 
			 <a href="GUID-390867EA-9DD8-4CBE-93B6-CE11251C050D.htm">Scripts to Set Environment Variables      Setting Environment Variables</a> step of the Getting Started process, 
			 <span class="keyword">MKL_MIC_ENABLE</span> is the only environment variable that you need to set. 
		  </li>
 
		  <li>Otherwise, you must also set the 
			 <span class="keyword">LD_LIBRARY_PATH</span> and 
			 <span class="keyword">MIC_LD_LIBRARY_PATH</span> environment variables. 
		  </li>
 
		</ul>
 
	 </div> 
	 <p id="GUID-053418A7-04A1-497E-8BFE-2E69A9054F66">To set the environment variables for Automatic Offload mode, described in 
		<a href="GUID-3DC4FC7D-A1E4-423D-9C0C-06AB265FFA86.htm">Automatic Offload Controls</a>, use the appropriate commands in your command shell: 
	 </p>
 
	 <ul id="GUID-8846B1E0-63D8-42A2-A5F6-A4996E679600"> 
		<li> 
		  <p id="GUID-4EAACE00-390D-405C-B6AC-A89F5B275890">For the bash shell, set the appropriate environment variable(s) as follows: 
		  </p>
 
		  <p id="GUID-06B02462-E0B1-4F78-95C6-40786933FD4A"><samp class="codeph" id="GUID-9EF5BE08-0B0D-4A8B-A0F6-2CBAE1F2799B"> export MKL_MIC_ENABLE=1 
			 </samp> 
		  </p>
 
		  <p><samp class="codeph" id="GUID-98CD6679-6A75-4B16-91C1-EA54F90DD1A3">export OFFLOAD_DEVICES=<var>&lt;list&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">export OFFLOAD_DEVICES=1,3</samp> 
		  </p>
 
		  <p><samp class="codeph"> export OFFLOAD_ENABLE_ORSL=1 
			 </samp> 
		  </p>
 
		  <p><samp class="codeph">export MKL_HOST_WORKDIVISION=<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">export MKL_HOST_WORKDIVISION=0.2</samp> 
		  </p>
 
		  <p> 
			 <samp class="codeph">export MKL_MIC_WORKDIVISION=<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p><samp class="codeph" id="GUID-CBFB1E9C-B4DB-4686-AFB6-53A68A394A27">export MKL_MIC<var>_&lt;number&gt;</var>_WORKDIVISION=<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">export MKL_MIC_2_WORKDIVISION=0.33</samp> 
		  </p>
 
		  <p><samp class="codeph">export MKL_MIC_MAX_MEMORY=<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p><samp class="codeph">export MKL_MIC<var>_&lt;number&gt;</var>_MAX_MEMORY=<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph"> export MKL_MIC_0_MAX_MEMORY=2G</samp> 
		  </p>
 
		  <p><samp class="codeph">export MIC_OMP_NUM_THREADS=<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p><samp class="codeph">export MIC<var>_&lt;number&gt;</var>_OMP_NUM_THREADS</samp>=<var>&lt;value&gt;</var> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">export MIC_0_OMP_NUM_THREADS=240</samp> 
		  </p>
 
		  <p><samp class="codeph">export OFFLOAD_REPORT=<var>&lt;level&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">export OFFLOAD_REPORT=2</samp> 
		  </p>
 
		  <p><samp class="codeph"> export LD_LIBRARY_PATH="/opt/intel/mic/coi/host-linux-release/lib:${LD_LIBRARY_PATH}"</samp> 
		  </p>
 
		  <p><samp class="codeph"> export MIC_LD_LIBRARY_PATH="/opt/intel/mic/coi/device-linux-release/lib:${MKLROOT}/lib/mic:${MIC_LD_LIBRARY_PATH}"</samp> 
		  </p>
 
		</li>
 
		<li> 
		  <p id="GUID-4D696CBA-F8B1-44B1-906C-D8CB82AA104D">For the C shell (csh or tcsh), set the appropriate environment variable(s) as follows: 
		  </p>
 
		  <p id="GUID-950DAB85-79D9-441E-988D-E5A094DB2660"><samp class="codeph" id="GUID-5C2BFDCF-446A-4FE4-A162-7A4AA56D3204"> setenv MKL_MIC_ENABLE 1 
			 </samp> 
		  </p>
 
		  <p><samp class="codeph">setenv OFFLOAD_DEVICES 
				<var>&lt;list&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">setenv OFFLOAD_DEVICES 1,3</samp> 
		  </p>
 
		  <p><samp class="codeph"> setenv OFFLOAD_ENABLE_ORSL 1 
			 </samp> 
		  </p>
 
		  <p><samp class="codeph" id="GUID-78035E76-089F-457D-B808-6ADD62CF40C8">setenv MKL_HOST_WORKDIVISION 
				<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">setenv MKL_HOST_WORKDIVISION 0.2</samp> 
		  </p>
 
		  <p><samp class="codeph">setenv MKL_MIC_WORKDIVISION 
				<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p> 
			 <samp class="codeph" id="GUID-E5C5718D-F55B-4775-8EA2-80EB05EF7256">setenv MKL_MIC<var>_&lt;number&gt;</var>_WORKDIVISION<var></var> 
				<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">setenv MKL_MIC_2_WORKDIVISION 0.33</samp> 
		  </p>
 
		  <p><samp class="codeph">setenv MKL_MIC_MAX_MEMORY 
				<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p><samp class="codeph">setenv MKL_MIC<var>_&lt;number&gt;</var>_MAX_MEMORY 
				<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">setenv MKL_MIC_0_MAX_MEMORY 2G</samp> 
		  </p>
 
		  <p><samp class="codeph">setenv MIC_OMP_NUM_THREADS 
				<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p><samp class="codeph">setenv MIC<var>_&lt;number&gt;</var>_OMP_NUM_THREADS 
				<var>&lt;value&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">setenv MIC_0_OMP_NUM_THREADS 240</samp> 
		  </p>
 
		  <p><samp class="codeph">setenv OFFLOAD_REPORT 
				<var>&lt;level&gt;</var></samp> 
		  </p>
 
		  <p>For example: 
			 <samp class="codeph">setenv OFFLOAD_REPORT 2</samp> 
		  </p>
 
		  <p><samp class="codeph"> setenv LD_LIBRARY_PATH "/opt/intel/mic/coi/host-linux-release/lib:${LD_LIBRARY_PATH}"</samp> 
		  </p>
 
		  <p><samp class="codeph"> setenv MIC_LD_LIBRARY_PATH "/opt/intel/mic/coi/device-linux-release/lib:${MKLROOT}/lib/mic:${MIC_LD_LIBRARY_PATH}"</samp> 
		  </p>
 
		</li>
 
	 </ul>
 
	 </div>
 
  
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong>&nbsp;<a href="GUID-023059FF-E35D-4DEB-829F-6FFF1E8CFF45.htm">Automatic Offload</a></div>
</div>
<div class="See Also"><h2>See Also</h2>
<div class="linklist">
<div><a href="GUID-3DC4FC7D-A1E4-423D-9C0C-06AB265FFA86.htm#GUID-3DC4FC7D-A1E4-423D-9C0C-06AB265FFA86">Automatic Offload Controls</a></div>
<div><a href="GUID-9B5D271C-F370-437D-A409-0D8491CE6733.htm">Detailed Directory Structure of the lib/mic Directory 
		  </a>  
		  </div></div><br clear="all">
<div class="docfeedback">
<div><a href="http://www.intel.com/software/products/softwaredocs_feedback" target="_blank">Submit feedback on this help topic 
		  </a></div></div></div> 

</body>
</html>
